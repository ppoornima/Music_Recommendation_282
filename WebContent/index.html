
<!DOCTYPE HTML>
<html>


<head>
<title>Online Shopping Website</title>

<link href="assets/css/bootstrap.css" rel='stylesheet' type='text/css' />
<!-- jQuery (necessary JavaScript plugins) -->
<script type='text/javascript' src="assets/js/jquery-1.11.1.min.js"></script>
<!-- Custom Theme files -->
<link href="assets/css/style.css" rel='stylesheet' type='text/css' />
<!-- Custom Theme files -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!--webfont-->
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<!-- start menu -->
<link href="assets/css/megamenu.css" rel="stylesheet" type="text/css" media="all" />
<script type="text/javascript" src="assets/js/megamenu.js"></script>
<script>$(document).ready(function(){$(".megamenu").megamenu();});</script>
<script src="assets/js/menu_jquery.js"></script>

<script src="assets/js/signUp.js"></script>
<script src="assets/js/jquery.cookie.js"></script>
<script src="constants.js"></script>
	<script type="text/javascript">
	
function LogInfun(){

	var URL = "/cloudservices/rest/users/signin";
	//var URL = "http://" + IP +"/cloudservices/rest/users/signin";
	alert("signin button clicked"+ "\t Object:"+ formToJSON1() );//+formToJSON());
		
	alert(formToJSON1());
	
	$.ajax({
			type: "POST",
			url: URL,
			contentType: "application/json",
			dataType: 'json',
			data : formToJSON1(),
				//success: function () { //success(data); }
	
			success: function(data, textStatus, jqXHR){
					//alert("Success:\t " + JSON.stringify(data["statusCode"])+"\t StatusMessage"+ JSON.stringify(data["statusMessage"]));
					
					if(JSON.stringify(data["statusCode"])== 200 )
					{ 
						$.cookie("email",JSON.stringify(data["email"]));
						$.cookie("firstName",JSON.stringify(data["firstName"]));
						$.cookie("lastLoginTime",JSON.stringify(data["lastLoginTime"]));
						alert(JSON.stringify(data["email"]));
						//window.location.href = "home.html?firstName="+JSON.stringify(data["firstName"])+"&lastLoginTime="+JSON.stringify(data["lastLoginTime"]);
					window.location.href="home.html";
					
					
					}
					else
						{
						alert("Status Code: "+ JSON.stringify(data["statusCode"])+"\n Status Message:"+ JSON.stringify(data["statusMessage"])+"\n Please enter your username and password correctly!");
						
						}
					
				},
			error: function(data, textStatus, jqXHR,errorThrown){
				
				alert("fail" + textStatus+" "+jqXHR +"\n data:"+ JSON.stringify(data));
			}

		});
}

function formToJSON1() {
    return JSON.stringify({
    "email": $('#userName').val(),
    "passwd": $('#password').val(),
    });
    
    
}
	</script>
	
	
	<script>
	function signUpfun(){
		
		
		
		alert('user  '+ formToJSON());	

		jQuery.ajax({
		    type: "POST",
		    url: "/cloudservices/rest/users/signup",
		    data: formToJSON(),
		    contentType: "application/json; charset=utf-8",
		    dataType: "json",
		    success: function (data, status, jqXHR) {
		    	
		    	if(JSON.stringify(data["statusCode"])== 200 )
				{
		    		alert("Status code : "+ JSON.stringify(data["statusCode"])+"\n Status message: "+ JSON.stringify(data["statusMessage"])+"\n User created successfully" );
					window.location.href = "home.html";
					$.cookie("email",JSON.stringify(data["email"]));
					$.cookie("firstName",JSON.stringify(data["firstName"]));
					//$.cookie("lastLoginTime",JSON.stringify(data["lastLoginTime"]));
					}
				else
					{
					alert("Status Code: "+ JSON.stringify(data["statusCode"])+"\n Status Message:"+ JSON.stringify(data["statusMessage"])+"\n Account already exists!");
					
					}
						    },

		    error: function (jqXHR, status) {            
		    	alert(jqXHR+" "+status);
		    }

		});
		}


		function formToJSON() {
		    return JSON.stringify({
		    "firstName": $('#firstName').val(),
		    "lastName": $('#lastName').val(),
		    "email": $('#email').val(),
		    "passwd": $('#passwd').val()
		    });
		}
	</script>
<script type="text/javascript">
function signOutFun(){
	
	$.removeCookie("email"); 
	$.removeCookie("firstName"); 
	$.removeCookie("lastLoginTime"); 

}
</script>
</head>


<body>
<!-- header_top -->
<div class="top_bg">
<div class="container">
<div class="header_top">
		<div class="top_left">
		<h2><a href="#">25%off</a> use coupon code "NEW007" and get extra 25% off on orders above 50 dollars </h2>
	</div>
	<div class="top_right">
		<ul>
			
			<li><a href="contact.html">Contact</a></li>
			
		</ul>
	</div>
	<div class="clearfix"></div>
</div>
</div>
</div>
<!-- header -->
<div class="header_bg">
<div class="container">
	<div class="header">
	<div class="logo">
			<h3>Online Shopping Stores</h3>
			
			<p>CmpE 282 - Cloud Services</p>
		</div>
		
		<!-- start header_right -->
		<div class="header_right">
		<div class="search">
		    <form>
		    	<input type="text" value="" placeholder="search...">
				<input type="submit" value="">
			</form>
		</div>
		<div class="clearfix"></div>
		</div>

    </div>
</div>
</div>
<!-- content -->
<div class="container">
<div class="main">
	<!-- start registration -->
	<div class="registration">
		<div class="registration_left">
		<h2>new user? <span> create an account </span></h2>
		
		<script>
			(function() {
		
			// Create input element for testing
			var inputs = document.createElement('input');
			
			// Create the supports object
			var supports = {};
			
			supports.autofocus   = 'autofocus' in inputs;
			supports.required    = 'required' in inputs;
			supports.placeholder = 'placeholder' in inputs;
		
			// Fallback for autofocus attribute
			if(!supports.autofocus) {
				
			}
			
			// Fallback for required attribute
			if(!supports.required) {
				
			}
		
			// Fallback for placeholder attribute
			if(!supports.placeholder) {
				
			}
			
			// Change text inside send button on submit
			var send = document.getElementById('register-submit');
			if(send) {
				send.onclick = function () {
					this.innerHTML = '...Sending';
				}
			}
		
		})();
		</script>
		 <div class="registration_form">
		 <!-- Form -->
			<form id="registration_form" onsubmit="return false;">
				<div>
					<label>
						<input id="firstName" placeholder="first name" type="text" tabindex="1"  pattern="^[a-z A-Z]+$" autofocus>
					</label>
				</div>
				<div>
					<label>
						<input id="lastName" placeholder="last name" type="text" tabindex="2"  pattern="^[a-z A-Z]+$" required autofocus>
					</label>
				</div>
				<div>
					<label>
						<input id="email" placeholder="email address" type="email" tabindex="3" required>
					</label>
				</div>
			
				<div>
					<label>
						<input id="passwd"  placeholder="password" type="password" tabindex="4"  pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z]{8,}$" required>
					</label>
				</div>						
				<div>
					<label>
						<input id="repasswd"  placeholder="retype password" type="password" tabindex="5" required>
					</label>
				</div>	
				
				<button class="btn btn-primary" id="signUp" onclick="signUpfun()">Sign Up</button>
					<input type="reset" class="btn btn-primary" id="clear">
							</form>
			<!-- /Form -->
			
		</div>
	</div>
	<div class="registration_left">
		<h2>existing user</h2>
		
		 <div class="registration_form">
		 <!-- Form -->
			<form id="registration_form" onsubmit="return false;">
				<div>
					<label>
						<input id="userName" placeholder="email" type="email" tabindex="5" required>
					</label>
				</div>
				<div>
					<label>
						<input id="password" placeholder="password" type="password" tabindex="6" required>
					</label>
				</div>							
				<div>
				<button class="btn btn-primary" id="login" onclick="LogInfun()">sign in</button>
					<!-- <input type="submit" value="sign in" id="register-submit"> -->
				<input type="reset" class="btn btn-primary" id="clear">
				</div>
				<div class="forget">
					<a href="#">forgot your password</a>
				</div>
			</form>
			<!-- /Form -->
			</div>
	</div>
	<div class="clearfix"></div>
	</div>
	<!-- end registration -->
</div>
</div>

<!-- footer -->
<div class="footer">
 <div class="container">
	<div class="copy">
		<p class="link">&copy; All rights reserved </p>
	</div>
 </div>
</div>
</body>
</html>